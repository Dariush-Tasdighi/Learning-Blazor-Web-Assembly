import getBasePlacement from"../utils/getBasePlacement.js";import getLayoutRect from"../dom-utils/getLayoutRect.js";import contains from"../dom-utils/contains.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getMainAxisFromPlacement from"../utils/getMainAxisFromPlacement.js";import{within}from"../utils/within.js";import mergePaddingObject from"../utils/mergePaddingObject.js";import expandToHashMap from"../utils/expandToHashMap.js";import{left,right,basePlacements,top,bottom}from"../enums.js";var toPaddingObject=function(e,t){return e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e,mergePaddingObject("number"!=typeof e?e:expandToHashMap(e,basePlacements))};function arrow(e){var t,r,o,n,a=e.state,i=e.name,e=e.options,s=a.elements.arrow,m=a.modifiersData.popperOffsets,f=getBasePlacement(a.placement),p=getMainAxisFromPlacement(f),f=0<=[left,right].indexOf(f)?"height":"width";s&&m&&(e=toPaddingObject(e.padding,a),t=getLayoutRect(s),o="y"===p?top:left,n="y"===p?bottom:right,r=a.rects.reference[f]+a.rects.reference[p]-m[p]-a.rects.popper[f],m=m[p]-a.rects.reference[p],s=(s=getOffsetParent(s))?"y"===p?s.clientHeight||0:s.clientWidth||0:0,o=e[o],e=s-t[f]-e[n],n=s/2-t[f]/2+(r/2-m/2),s=within(o,n,e),a.modifiersData[i]=((t={})[p]=s,t.centerOffset=s-n,t))}function effect(e){var t=e.state,e=e.options.element,e=void 0===e?"[data-popper-arrow]":e;null!=e&&("string"!=typeof e||(e=t.elements.popper.querySelector(e)))&&contains(t.elements.popper,e)&&(t.elements.arrow=e)}export default{name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};